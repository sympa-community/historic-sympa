
<H1><A NAME="SECTION002400000000000000000">
23. Bounce management</A>
</H1>

<P>
<I>Sympa</I> allows bounce (non-delivery report) management. This
prevents list owners from receiving each bounce (1 per message
sent to a bouncing subscriber) in their own mailbox. Without
automatic processing of bounces, list owners either go
mad, or just delete them without further attention.

<P>
Bounces are received at mylist-owner address, which should
be sent to the <A NAME="10971"><tex2html_anchor_invisible_mark></A><TT>bouncequeue</TT> program via aliases :

<P>
<BLOCKQUOTE>
</BLOCKQUOTE><PRE><tex2html_verbatim_mark>verbatim397#</PRE><BLOCKQUOTE>
</BLOCKQUOTE>

<P>
<A NAME="10974"><tex2html_anchor_invisible_mark></A><TT>bouncequeue</TT> (see <A HREF=<tex2html_cr_mark>#binaries#4086><tex2html_cr_mark></A>, page~<A HREF=<tex2html_cr_mark>#binaries#4087><tex2html_cross_ref_visible_mark></A>) stores bounces in a
<A NAME="10977"><tex2html_anchor_invisible_mark></A><TT>/usr/local/sympa-ff//spool/bounce/</TT> spool.

<P>
Bounces are then processed by the <A NAME="10980"><tex2html_anchor_invisible_mark></A><TT>bounced.pl</TT> daemon.
This daemon analyses bounces to find out which
e-mail addresses are concerned and what kind of error was generated.
If bouncing addresses match a subscriber's address, information 
is stored in the <I>Sympa</I> database (in subscriber_table). Moreover, the most recent
bounce itself is archived in <A NAME="10984"><tex2html_anchor_invisible_mark></A><TT>bounce_path/mylist/email</TT>
(where bounce_path is defined in a <A NAME="10987"><tex2html_anchor_invisible_mark></A><TT>wwsympa.conf</TT> parameter and
email is the user e-mail address).

<P>
When reviewing a list, bouncing addresses are tagged as bouncing.
You may access further information such as dates of first and last bounces,
number of received bounces for the address, the last bounce itself.

<P>
With these informations, the automatic bounce management is possible:

<P>

<UL>
<LI>The automatic task <A NAME="10990"><tex2html_anchor_invisible_mark></A><TT>eval_bouncer</TT> gives a score foreach bouncing user.
  The score, between 0 to 100, allows the classification of bouncing users in two levels.
  (Level 1 or 2). 
  According to the level, automatic actions are executed periodicaly by <A NAME="10993"><tex2html_anchor_invisible_mark></A><TT>process_bouncers</TT>
  task.

<P>
</LI>
<LI>The score evaluation main parameters are: 

<P>
<A NAME="10996"><tex2html_anchor_invisible_mark></A><TT>Bounces count</TT>: The number of bouncing messages received by sympa for the user.

<P>
<A NAME="10999"><tex2html_anchor_invisible_mark></A><TT>Type rate</TT> : Bounces are classified depending on the type of errors generated on the user
  side. If the error type is ;SPMquot;mailbox is full;SPMquot; (ie a temporary 4.2.2 error type) the type rate will be
  0.5 whereas permanent errors (5.x.x) have a type rate equal to 1.

<P>
<A NAME="11002"><tex2html_anchor_invisible_mark></A><TT>Regularity rate</TT> : This rate tells if the bounces where received regularly, compared to list
 traffic. The list traffic is deduced from <A NAME="11005"><tex2html_anchor_invisible_mark></A><TT>msg_count</TT> file data.

<P>
<BLOCKQUOTE>
</BLOCKQUOTE><PRE><tex2html_verbatim_mark>verbatim398#</PRE><BLOCKQUOTE>
</BLOCKQUOTE>

<P>
To avoid making decisions (ie defining a score) without enough relevant data, the score is not
  evaluated if :

<P>

<UL>
<LI>The number of the number of received bounces is lower than <A NAME="11008"><tex2html_anchor_invisible_mark></A><TT>minimum_bouncing_count</TT> 
	(see <A HREF=<tex2html_cr_mark>#kw-minimum-bouncing-count#4105><tex2html_cr_mark></A>, page~<A HREF=<tex2html_cr_mark>#kw-minimum-bouncing-count#4106><tex2html_cross_ref_visible_mark></A>)

<P>
</LI>
<LI>The bouncing period is shorter than <A NAME="11011"><tex2html_anchor_invisible_mark></A><TT>minimum_bouncing_period</TT> 
	(see <A HREF=<tex2html_cr_mark>#kw-minimum-bouncing-period#4108><tex2html_cr_mark></A>, page~<A HREF=<tex2html_cr_mark>#kw-minimum-bouncing-period#4109><tex2html_cross_ref_visible_mark></A>)

<P>
</LI>
</UL>

<P>
</LI>
<LI>You can define the limit between each level via the <B>List configuration pannel</B>, 
  in subsection <B>Bounce settings</B>. (see <A HREF=<tex2html_cr_mark>#rate#4113><tex2html_cr_mark></A>) The principle consists in
  associating a score interval with a level.

<P>
</LI>
<LI>You can also define wich action must be applied on each category of user.(see <A HREF=<tex2html_cr_mark>#action#4114><tex2html_cr_mark></A>)
  Each time an action will be done, a notification email will be send to the person of your choice.
  (see <A HREF=<tex2html_cr_mark>#notification#4115><tex2html_cr_mark></A>)

<P>
</LI>
</UL>

<P>

